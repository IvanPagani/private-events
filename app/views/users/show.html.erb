<h1>Users#show</h1>

<h2><%= @user.email %> Events</h2>

<h3>Invitations Received</h3>

<% if @received_invitations.any? %>
  <ul>
    <% @received_invitations.each do |invitation| %>
      <% event = invitation.invited_to_event %>

      <li>
        <strong><%= link_to event.title, event %></strong>
        â€” Status: <%= invitation.status.capitalize %>

        <% if invitation.pending? %>
          <%= button_to "Accept", event_event_invitation_path(invitation, status: :accepted), method: :patch %>
          <%= button_to "Decline", event_event_invitation_path(invitation, status: :declined), method: :patch %>
        <% end %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>No invitations received.</p>
<% end %>

<h3>Upcoming Events</h3>
<% if @upcoming_events.any? %>
  <ul>
    <% @upcoming_events.each do |event| %>
      <li>
        <strong><%= link_to event.title, event %></strong>
        at <%= event.location %> 
        on <%= event.event_datetime.strftime("%B %d, %Y %H:%M") %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>No upcoming events.</p>
<% end %>

<h3>Past Events</h3>
<% if @past_events.any? %>
<ul>
    <% @past_events.each do |event| %>
      <li>
        <strong><%= link_to event.title, event %></strong>
        at <%= event.location %> 
        on <%= event.event_datetime.strftime("%B %d, %Y %H:%M") %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>No past events.</p>
<% end %>